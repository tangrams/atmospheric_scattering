export var StarJs={};StarJs.b={};StarJs.Math=StarJs.b;StarJs.b.l=Math.PI/180;StarJs.b.DEG2RAD=Math.PI/180;StarJs.b.oa=180/Math.PI;StarJs.b.RAD2DEG=180/Math.PI;StarJs.b.na=648E3/Math.PI;StarJs.b.RAD2ARCS=648E3/Math.PI;StarJs.b.t=Math.PI/648E3;StarJs.b.ARCS2RAD=Math.PI/648E3;StarJs.b.m=2*Math.PI;StarJs.b.PI2=2*Math.PI;StarJs.b.Y=12/Math.PI;StarJs.b.W=function(a){return a*a};StarJs.b.sqr=StarJs.b.W;StarJs.b.r=function(a){return a-Math.floor(a)};StarJs.b.frac=StarJs.b.r;StarJs.b.I=function(a,b){return b*StarJs.b.r(a/b)};
StarJs.b.mod=StarJs.b.I;StarJs.b.s=function(a,b,c,d){if(arguments.length===4){this.sign=a;this.degree=b;this.minute=c;this.second=d}else{var e=a;this.sign=1;if(e<0){e=-e;this.sign=-1}this.degree=Math.floor(e);e=60*(e-this.degree);this.minute=Math.floor(e);this.second=e=60*(e-this.minute)}};StarJs.b.Dms=StarJs.b.s;StarJs.b.H=function(a,b,c,d){return a*(b+c/60+d/3600)};StarJs.b.dms2deg=StarJs.b.H;StarJs.b.s.prototype.H=function(){return StarJs.b.H(this.sign,this.degree,this.minute,this.second)};
StarJs.b.s.prototype.dms2deg=StarJs.b.s.prototype.H;StarJs.b.s.N=function(a){return new StarJs.b.s(a)};StarJs.b.s.deg2dms=StarJs.b.s.N;StarJs.b.aa=function(a){a=StarJs.b.I(a,StarJs.b.m);a=StarJs.b.N(StarJs.b.Y*a);a.hour=a.deg;delete a.deg;delete a.sign;return a};StarJs.b.angle2hms=StarJs.b.aa;
StarJs.b.V=function(a,b,c){var d=0.5*(c+a)-b,e=0.5*(c-a);a=-e/(2*d);c=(d*a+e)*a+b;e=e*e-4*d*b;b=[];if(e>=0){e=0.5*Math.sqrt(e)/Math.abs(d);d=a-e;e=a+e;Math.abs(d)<=1&&b.push(d);Math.abs(e)<=1&&b.push(e)}return{xe:a,ye:c,roots:b}};StarJs.b.quadInterpolation=StarJs.b.V;StarJs.c={};StarJs.Vector=StarJs.c;StarJs.c.p=function(a,b,c){this.x=a;this.y=b;this.z=c};StarJs.c.Vector3=StarJs.c.p;
(function(a){a.ga=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};a.len=a.ga;a.add=function(b){return new StarJs.c.p(this.x+b.x,this.y+b.y,this.z+b.z)};a.add=a.add;a.sub=function(b){return new StarJs.c.p(this.x-b.x,this.y-b.y,this.z-b.z)};a.sub=a.sub;a.ia=function(){return new StarJs.c.p(-this.x,-this.y,-this.z)};a.neg=a.ia;a.scale=function(b){return new StarJs.c.p(b*this.x,b*this.y,b*this.z)};a.scale=a.scale;a.J=function(){return new StarJs.c.p(this.x,this.y,this.z)};a.clone=
a.J})(StarJs.c.p.prototype);StarJs.c.o=function(a,b,c){var d=arguments.length;if(d===2)c=1;if(d===2||d===3){this.phi=a;this.theta=b;this.rad=c}else{d=a.x*a.x+a.y*a.y;this.rad=Math.sqrt(d+a.z*a.z);this.phi=a.x===0&&a.y===0?0:Math.atan2(a.y,a.x);if(this.phi<0)this.phi+=StarJs.b.m;d=Math.sqrt(d);this.theta=a.z===0&&d===0?0:Math.atan2(a.z,d)}};StarJs.c.Polar3=StarJs.c.o;
(function(a){a.G=function(){var b=Math.cos(this.theta),c=this.rad;return new StarJs.c.p(c*b*Math.cos(this.phi),c*b*Math.sin(this.phi),c*Math.sin(this.theta))};a.toVector3=a.G;a.J=function(){return new StarJs.c.o(this.rad,this.phi,this.theta)};a.clone=a.J})(StarJs.c.o.prototype);StarJs.c.g=function(a,b,c){this.mat=arguments.length===3?[[a.x,a.y,a.z],[b.x,b.y,b.z],[c.x,c.y,c.z]]:b?a:[[a[0][0],a[0][1],a[0][2]],[a[1][0],a[1][1],a[1][2]],[a[2][0],a[2][1],a[2][2]]]};StarJs.c.Matrix3=StarJs.c.g;
(function(a){a.apply=function(b){var c=this.mat[0],d=c[0]*b.x+c[1]*b.y+c[2]*b.z;c=this.mat[1];var e=c[0]*b.x+c[1]*b.y+c[2]*b.z;c=this.mat[2];return new StarJs.c.p(d,e,c[0]*b.x+c[1]*b.y+c[2]*b.z)};a.apply=a.apply;a.v=function(b){var c=[[0,0,0],[0,0,0],[0,0,0]];b=b.mat;for(var d=0;d<3;d+=1)for(var e=this.mat[d],g=c[d],j=0;j<3;j+=1)for(var n=0;n<3;n+=1)g[j]+=e[n]*b[n][j];return new StarJs.c.g(c,true)};a.mult=a.v})(StarJs.c.g.prototype);
StarJs.c.g.A=function(a){var b=Math.cos(a);a=Math.sin(a);return new StarJs.c.g([[1,0,0],[0,b,a],[0,-a,b]])};StarJs.c.g.r_x=StarJs.c.g.A;StarJs.c.g.F=function(a){var b=Math.cos(a);a=Math.sin(a);return new StarJs.c.g([[b,0,-a],[0,1,0],[a,0,b]])};StarJs.c.g.r_y=StarJs.c.g.F;StarJs.c.g.B=function(a){var b=Math.cos(a);a=Math.sin(a);return new StarJs.c.g([[b,a,0],[-a,b,0],[0,0,1]])};StarJs.c.g.r_y=StarJs.c.g.F;StarJs.f={};StarJs.Time=StarJs.f;StarJs.f.DEFAULT_JULIAN_DATE={year:1582,month:10,day:4};StarJs.f.DEFAULT_JULIAN_JD=2299161;StarJs.f.ma=function(a){if(typeof a!=="number")a=a.getTime();return a/864E5+40587};StarJs.f.time2mjd=StarJs.f.ma;
StarJs.f.ha=function(a,b){if(typeof b==="undefined")b=StarJs.f.DEFAULT_JULIAN_JD;var c=Math.floor(a)+2400001,d,e;if(c<b)b=c+1524;else{b=Math.floor((c-1867216.25)/36524.25);b=c+b-Math.floor(b/4)+1525}c=Math.floor((b-122.1)/365.25);d=365*c+Math.floor(c/4);e=Math.floor((b-d)/30.6001);b=b-d-Math.floor(30.6001*e);e=e-1-12*Math.floor(e/14);c=c-4715-Math.floor((7+e)/10);a=StarJs.f.U(24*(a-Math.floor(a)));a.year=c;a.month=e;a.day=b;return a};StarJs.f.mjd2dt=StarJs.f.ha;
StarJs.f.T=function(a,b,c){return a+b/60+c/3600};StarJs.f.hms2hour=StarJs.f.T;StarJs.f.U=function(a){a=new StarJs.b.s(a);return{hour:a.degree,minute:a.minute,second:a.second}};StarJs.f.hour2hms=StarJs.f.U;
StarJs.f.ba=function(a,b){if(typeof b==="undefined")b=StarJs.f.DEFAULT_JULIAN_DATE;var c=a.year,d=a.month;if(d<=2){d+=12;c-=1}return 365*c-679004+(c<=b.year&&d<=b.month&&a.day<=b.day?-2+Math.floor((c+4716)/4)-1179:Math.floor(c/400)-Math.floor(c/100)+Math.floor(c/4))+Math.floor(30.6001*(d+1))+a.day+StarJs.f.T(a.hour,a.minute,a.second)/24};StarJs.f.dt2mjd=StarJs.f.ba;StarJs.f.K=function(a){return(a-51544.5)/36525};StarJs.f.mjd2jct=StarJs.f.K;
StarJs.f.S=function(a){var b=Math.floor(a),c=86400*(a-b);b=StarJs.f.K(b);a=StarJs.f.K(a);return StarJs.b.m/86400*StarJs.b.I(24110.54841+8640184.812866*b+1.0027379093*c+(0.093104-6.2E-6*a)*a*a,86400)};StarJs.f.gmst=StarJs.f.S;StarJs.j={};StarJs.Coord=StarJs.j;StarJs.j.ja=function(a,b){b=b-a;var c,d;c=174.876383889*StarJs.b.l+((3289.4789+0.60622*a)*a+(-869.8089-0.50491*a+0.03536*b)*b)*StarJs.b.t;d=(47.0029-(0.06603-5.98E-4*a)*a+(-0.03302+0.00598*a+6.0E-5*b)*b)*b*StarJs.b.t;return StarJs.c.g.B(-(c+(5029.0966+(2.22226-4.2E-5*a)*a+(1.11113-4.2E-5*a-6.0E-6*b)*b)*b*StarJs.b.t)).v(StarJs.c.g.A(d)).v(StarJs.c.g.B(c))};StarJs.j.precessionEclMatrix=StarJs.j.ja;
StarJs.j.ka=function(a,b){var c=b-a,d;b=(2306.2181+(1.39656-1.39E-4*a)*a+(0.30188-3.44E-4*a+0.017998*c)*c)*c*StarJs.b.t;d=b+(0.7928+4.11E-4*a+2.05E-4*c)*c*c*StarJs.b.t;a=(2004.3109-(0.8533+0.00217*a)*a-(0.42665+2.17E-4*a+0.041833*c)*c)*c*StarJs.b.t;return StarJs.c.g.B(-d).v(StarJs.c.g.F(a)).v(StarJs.c.g.B(-b))};StarJs.j.precessionEquMatrix=StarJs.j.ka;StarJs.j.da=function(a){return StarJs.c.g.A((23.43929111-(46.815+(5.9E-4-0.001813*a)*a)*a/3600)*StarJs.l)};StarJs.j.equ2eclMatrix=StarJs.j.da;
StarJs.j.ca=function(a){return StarJs.c.g.A(-((23.43929111-(46.815+(5.9E-4-0.001813*a))*a)*StarJs.b.l))};StarJs.j.ecl2equMatrix=StarJs.j.ca;StarJs.j.ea=function(a,b,c){a=StarJs.c.g.F(Math.PI/2-c).apply((new StarJs.c.o(b,a)).G());a=new StarJs.c.o(a);return{h:a.theta,az:a.phi}};StarJs.j.equ2hor=StarJs.j.ea;StarJs.j.fa=function(a,b,c){a=StarJs.c.g.F(-Math.PI/2+c).apply((new StarJs.c.o(b,c)).G());a=new StarJs.c.o(a);return{dec:a.theta,tau:a.phi}};StarJs.j.hor2equ=StarJs.j.fa;StarJs.k={};StarJs.Kepler=StarJs.k;StarJs.k.DEFAULT_ITERATIONS=100;StarJs.k.DEFAULT_PRECISION=1.0E-9;StarJs.k.P=function(a,b,c){var d,e=StarJs.k.DEFAULT_PRECISION;if(c===undefined)c=StarJs.k.DEFAULT_ITERATIONS;a=StarJs.b.I(a,StarJs.b.m);d=Math.sin(a);var g=a+b*d/(1-Math.sin(a+b)+d);do{d=g-b*Math.sin(g)-a;g-=d/(1-b*Math.cos(g))}while(c-- >0&&d>e);return c>0?g:null};StarJs.k.eccAnomaly=StarJs.k.P;
StarJs.k.Q=function(a,b,c,d){b=StarJs.k.P(b,d);a=Math.cos(b);b=Math.sin(b);return new StarJs.c.p(c*(a-d),c*Math.sqrt((1-d)*(1+d))*b,0)};StarJs.k.elliptic=StarJs.k.Q;StarJs.k.R=function(a,b,c){return StarJs.c.g.B(-a).v(StarJs.c.g.A(-b)).v(StarJs.c.g.B(-c))};StarJs.k.gaussVec=StarJs.k.R;StarJs.d={};StarJs.Solar=StarJs.d;StarJs.d.L=23.43920111*StarJs.b.l;
StarJs.d.D=function(a){var b,c,d,e,g,j;b=StarJs.b.r(0.606433+1336.855225*a);c=StarJs.b.m*StarJs.b.r(0.374897+1325.55241*a);d=StarJs.b.m*StarJs.b.r(0.993133+99.997361*a);g=StarJs.b.m*StarJs.b.r(0.827361+1236.853086*a);e=StarJs.b.m*StarJs.b.r(0.259086+1342.227825*a);j=+22640*Math.sin(c)-4586*Math.sin(c-2*g)+2370*Math.sin(2*g)+769*Math.sin(2*c)-668*Math.sin(d)-412*Math.sin(2*e)+-212*Math.sin(2*c-2*g)-206*Math.sin(c+d-2*g)+192*Math.sin(c+2*g)-165*Math.sin(d-2*g)+-125*Math.sin(g)-110*Math.sin(c+d)+148*
Math.sin(c-d)+-55*Math.sin(2*e-2*g);a=e+(j+412*Math.sin(2*e)+541*Math.sin(d))*StarJs.b.t;g=e-2*g;c=-526*Math.sin(g)+44*Math.sin(c+g)-31*Math.sin(g-c)+-23*Math.sin(d+g)+11*Math.sin(g-d)-25*Math.sin(e-2*c)+21*Math.sin(e-c);b=StarJs.b.m*StarJs.b.r(b+j/1296E3);a=(18520*Math.sin(a)+c)*StarJs.b.t;b=StarJs.c.g.A(-StarJs.d.L).apply((new StarJs.c.o(b,a)).G());b=new StarJs.c.o(b);return{ra:b.phi,dec:b.theta}};StarJs.d.approxMoon=StarJs.d.D;
StarJs.d.u=function(a){var b,c;c=StarJs.b.r(0.993133+99.997361*a);b=StarJs.b.m*c;a=StarJs.b.m*StarJs.b.r(0.7859453+c+(6893*Math.sin(b)+72*Math.sin(2*b)+6191.2*a)/1296E3);a=StarJs.c.g.A(-StarJs.d.L).apply((new StarJs.c.o(a,0)).G());a=new StarJs.c.o(a);return{ra:a.phi,dec:a.theta}};StarJs.d.approxSun=StarJs.d.u;
StarJs.d.$=[{body:"moon",name:"day",title:"Moon",sinh0:Math.sin(+8/60*StarJs.b.l),posFunc:StarJs.d.D},{body:"sun",name:"day",title:"Sun",sinh0:Math.sin(-50/60*StarJs.b.l),posFunc:StarJs.d.u},{body:"sun",name:"twilightC",title:"Civil twilight",sinh0:Math.sin(-6*StarJs.b.l),posFunc:StarJs.d.u},{body:"sun",name:"twilightN",title:"Nautical twilight",sinh0:Math.sin(-12*StarJs.b.l),posFunc:StarJs.d.u},{body:"sun",name:"twilightA",title:"Astronomical twilight",sinh0:Math.sin(-18*StarJs.b.l),posFunc:StarJs.d.u}];
StarJs.d.la=function(a,b,c,d,e){function g(o,r,y,z,A){o=o((r-51544.5)/36525);r=StarJs.f.S(r)+y-o.ra;return A*Math.sin(o.dec)+z*Math.cos(o.dec)*Math.cos(r)}var j=StarJs.d.$,n=[],l,i,k,w=1/24,q={},s={},v={},p=Math.cos(d);d=Math.sin(d);var h,f,t={sun:{},moon:{}},x={sun:{},moon:{}},u={sun:{},moon:{}},m={};if(typeof e==="undefined")e=function(o){return o};k=a;q.moon=g(StarJs.d.D,k,c,p,d);q.sun=g(StarJs.d.u,k,c,p,d);for(i=0;i<j.length;i+=1){f=j[i];h=f.name;t[f.body][h]=q[f.body]-f.sinh0}for(;k<b;){e={moon:{midnight:q.moon},
sun:{midnight:q.sun}};for(l=1;l<24;l+=2){i=k+w;k=i+w;s.moon=g(StarJs.d.D,i,c,p,d);s.sun=g(StarJs.d.u,i,c,p,d);v.moon=g(StarJs.d.D,k,c,p,d);v.sun=g(StarJs.d.u,k,c,p,d);for(i=0;i<j.length;i+=1){f=j[i];h=f.name;e[f.body][h]=e[f.body][h]||{};x[f.body][h]=s[f.body]-f.sinh0;u[f.body][h]=v[f.body]-f.sinh0;m=StarJs.b.V(t[f.body][h],x[f.body][h],u[f.body][h]);switch(m.roots.length){case 0:break;case 1:if(t[f.body][h]<0)e[f.body][h].rise=l+m.roots[0];else e[f.body][h].set=l+m.roots[0];break;case 2:if(m.ye<
0){e[f.body][h].rise=l+m.roots[1];e[f.body][h].set=l+m.roots[0]}else{e[f.body][h].rise=l+m.roots[0];e[f.body][h].set=l+m.roots[1]}break}}t=u;u={moon:{},sun:{}};k=k}for(i=0;i<j.length;i+=1){f=j[i];h=f.name;if(!e[f.body][h].set&&!e[f.body][h].rise)e[f.body][h].alwaysAbove=s[f.body]>f.sinh0}k=a+=1;n.push(e)}return n};StarJs.d.sunAndMoonEvents=StarJs.d.la;StarJs.d.C=function(){this.name="Sun"};StarJs.d.Sun=StarJs.d.C;StarJs.d.C.X=new StarJs.c.p(0,0,0);StarJs.d.M=StarJs.b.W(0.01720209895);
StarJs.d.GM=StarJs.d.M;StarJs.d.C.prototype.keplerCoord=function(){return StarJs.d.C.X};StarJs.d.q=function(a,b){this.name=a;this.a=b.a;this.ec=b.e;this.m0=b.M0;this.n=b.n;this.omega=b.O;this.i=b.i;this.w=b.w;this.t0=b.T0};StarJs.d.Body=StarJs.d.q;StarJs.d.q.prototype.keplerCoord=function(a){var b=StarJs.k.Q(StarJs.d.M,StarJs.b.l*(this.m0+this.n*(a-this.t0)),this.a,this.ec);return StarJs.k.R(StarJs.b.l*(this.omega+1.397*a),StarJs.b.l*this.i,StarJs.b.l*(this.w-this.omega)).apply(b)};
StarJs.d.Z={Sun:new StarJs.d.C,Mercury:new StarJs.d.q("Mercury",{a:0.387099,e:0.205634,M0:174.7947,n:149472.6738,O:48.331,i:7.0048,w:77.4552,T0:0}),Venus:new StarJs.d.q("Venus",{a:0.723332,e:0.006773,M0:50.4071,n:58517.8149,O:76.68,i:3.3946,w:131.5718,T0:0}),Earth:new StarJs.d.q("Earth",{a:1,e:0.016709,M0:357.5256,n:35999.372,O:174.876,i:0,w:102.94,T0:0}),Mars:new StarJs.d.q("Mars",{a:1.523692,e:0.093405,M0:19.3879,n:19140.3023,O:49.557,i:1.8496,w:336.059,T0:0}),Jupiter:new StarJs.d.q("Jupiter",{a:5.204267,
e:0.048775,M0:18.8185,n:3033.6272,O:100.4908,i:1.3046,w:15.5576,T0:0}),Saturn:new StarJs.d.q("Saturn",{a:9.582018,e:0.055723,M0:320.3477,n:1213.8664,O:113.6427,i:2.4852,w:89.6567,T0:0}),Uranus:new StarJs.d.q("Uranus",{a:19.229412,e:0.044406,M0:142.9559,n:426.9282,O:73.9893,i:0.7726,w:170.531,T0:0}),Neptune:new StarJs.d.q("Neptune",{a:30.103658,e:0.011214,M0:267.7649,n:217.9599,O:131.7942,i:1.768,w:37.4435,T0:0})};StarJs.d.BODIES=StarJs.d.Z;
